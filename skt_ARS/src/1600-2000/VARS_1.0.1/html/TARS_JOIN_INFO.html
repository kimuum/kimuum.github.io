<!DOCTYPE html>
<html lang="ko">
  <!-- prettier-ignore -->
  @@include("head.html")

  <body>
    <!-- hidden input -->
    <input type="hidden" id="menu" iweb-data="in" />
    <input type="hidden" id="back_btn_type" value="#" />

    <input type="hidden" id="vars_type" iweb-data="in" />
    <input type="hidden" id="run_time" iweb-data="out" />
    <input type="hidden" id="cur_vars_type" iweb-data="out" />

    <input type="hidden" id="user_name" iweb-data="out" />
    <input type="hidden" id="user_info" iweb-data="out" />
    <input type="hidden" id="service_select" iweb-data="out" />
    <input type="hidden" id="payment_system" iweb-data="out" />
    <input type="hidden" id="join" iweb-data="out" />
    <input type="hidden" id="service_status" iweb-data="out" />
    <input type="hidden" id="set_agreement" iweb-data="out" />
    <input type="hidden" id="service_commitment" iweb-data="out" />
    <input type="hidden" id="payment_method" iweb-data="out" />
    <input type="hidden" id="fare_guide" iweb-data="out" />
    <input type="hidden" id="start_date" iweb-data="out" />
    <input type="hidden" id="end_date" iweb-data="out" />
    <input type="hidden" id="d_day" iweb-data="out" />
    <input type="hidden" id="percent" iweb-data="out" />
    <input type="hidden" id="service_start_date" iweb-data="out" />
    <input type="hidden" id="service_end_date" iweb-data="out" />
    <input type="hidden" id="service_d_day" iweb-data="out" />
    <input type="hidden" id="service_percent" iweb-data="out" />
    <input type="hidden" id="equipment_information" iweb-data="out" />
    <input type="hidden" id="use_service" iweb-data="out" />
    <input type="hidden" id="select_num" iweb-data="out" />

    <div class="wrapper join-info">
      <!-- 콜게이트 상단  -->
      <!-- prettier-ignore -->
      @@include("timeNoticeSub.html")

      <main class="main">
        <!-- prettier-ignore -->
        @@include("header.html", {
          "headerType" : "default",
          "title": '나의 가입정보',
          "isBtn" : true
        })

        <div class="content-container">
          <section class="content-area">
            <div class="join-info-container">
              <div class="join-info-top">
                <div class="info-title-box">
                  <div class="info-title">
                    <span id="name"></span>께서 이용중인 서비스<br />
                    정보입니다.
                  </div>
                  <ul class="info-list-box"></ul>
                </div>
                <div class="service-select-box" id="service">
                  <div class="dropdown-area">
                    <a href="#" class="btn-open">
                      <span>서비스 선택</span>
                    </a>
                    <ul class="dropdown-list"></ul>
                  </div>
                </div>
              </div>
              <div class="join-info-midivle">
                <div class="info-detail-area">
                  <div class="detail-title-box">
                    <div class="detail-title">상품가입정보 상세</div>
                  </div>
                  <div class="detail-item-box">
                    <div class="detail-item">
                      <div class="detail-label">요금제</div>
                      <div class="detail-data">
                        <span class="data-text" id="d_payment_system"></span>
                      </div>
                    </div>
                    <div class="detail-item">
                      <div class="detail-label">가입/해지일</div>
                      <div class="detail-data">
                        <span class="data-text" id="d_join"></span>
                      </div>
                    </div>
                    <div class="detail-item">
                      <div class="detail-label">서비스 상태</div>
                      <div class="detail-data">
                        <span class="data-text" id="d_service_status"></span>
                      </div>
                    </div>
                    <div class="detail-item detail-question">
                      <div class="detail-label">
                        <a href="#" class="btn-question" onclick="togglePopup('popupServiveAgree')">서비스약정</a>
                      </div>
                      <div class="detail-data">
                        <span class="data-text" id="d_service_commitment"></span>
                      </div>
                      <div class="detail-range-box" id="check_serv1">
                        <div class="range-text" id="check_serv1_graph">
                          <span>약정 시작/종료일</span>
                          <span id="service_date"></span>
                        </div>
                      </div>
                      <div class="alert-text-box" id="check_serv1_stop" style="display: none">
                        <p class="alert-text">정지기간은 약정기간에 포함되지 않습니다.</p>
                      </div>
                    </div>
                    <div class="detail-item detail-question">
                      <div class="detail-label">
                        <a href="#" class="btn-question" onclick="togglePopup('popupCombination')">결합약정</a>
                      </div>
                      <div class="detail-data">
                        <span class="data-text" id="d_set_agreement"></span>
                      </div>
                      <div class="detail-range-box" id="check_serv2">
                        <div class="range-text" id="check_serv2_graph">
                          <span>약정 시작/종료일</span>
                          <span id="set_agree_date"></span>
                        </div>
                      </div>
                      <div class="alert-text-box" id="check_serv2_stop" style="display: none">
                        <p class="alert-text">정지기간은 약정기간에 포함되지 않습니다.</p>
                      </div>
                    </div>
                    <div class="detail-item">
                      <div class="detail-label">기기정보</div>
                      <div class="detail-data">
                        <button class="btn-border-gray" id="btnDeviceInfo" onclick="togglePopup('popupDeviceInfo')">상세보기</button>
                      </div>
                    </div>
                    <div class="detail-item">
                      <div class="detail-label">사용중인 부가서비스</div>
                      <div class="detail-data">
                        <button class="btn-border-gray" id="btnService" onclick="togglePopup('popupService')">상세보기</button>
                      </div>
                    </div>
                    <div class="detail-item">
                      <div class="detail-label">납부방법</div>
                      <div class="detail-data">
                        <span class="data-text" id="d_payment_method"></span>
                      </div>
                    </div>
                    <div class="detail-item">
                      <div class="detail-label">요금안내서유형</div>
                      <div class="detail-data">
                        <span class="data-text" id="d_fare_guide"></span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
        <div class="service-button-box">
          <div class="button-box">
            <button type="button" class="btn btn-primary" onclick="javascript:sendRepPageData($(this).text().trim(), '0', 'menu');">확인</button>
          </div>
        </div>
        <!-- 콜게이트 종료버튼 -->
        <!-- prettier-ignore -->
        @@include("footerBtnEnd.html")
        <!-- //콜게이트 종료버튼 -->
      </main>
    </div>

    <!-- 기기정보 팝업-->
    <div class="popup" id="popupDeviceInfo">
      <div class="dim"></div>
      <div class="popup-container">
        <div class="popup-area">
          <div class="popup-top">
            <div class="popup-title">기기정보</div>
            <button type="button" class="btn-close" onclick="togglePopup('popupDeviceInfo')"></button>
          </div>
          <div class="popup-middle">
            <p class="popup-text" id="eq-guide" style="display: none"></p>
            <div class="table-container" id="eq_table">
              <div class="table-area">
                <table>
                  <caption></caption>
                  <colgroup>
                    <col />
                    <col />
                    <col />
                    <col />
                  </colgroup>
                  <thead>
                    <tr>
                      <th scope="col">서비스</th>
                      <th scope="col">임대/판매<br />구분</th>
                      <th scope="col">장비 약정</th>
                      <th scope="col">임대 시작일</th>
                    </tr>
                  </thead>
                  <tbody id="inf"></tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="popup-bottom">
            <div class="button-box">
              <button type="button" class="btn btn-primary" id="btnPrivacyAgree" onclick="togglePopup('popupDeviceInfo')"><span>닫기</span></button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 부가서비스 팝업 -->
    <div class="popup" id="popupService">
      <div class="dim"></div>
      <div class="popup-container">
        <div class="popup-area">
          <div class="popup-top">
            <div class="popup-title">부가서비스</div>
            <button type="button" class="btn-close" onclick="togglePopup('popupService')"></button>
          </div>
          <div class="popup-middle">
            <div class="caution-guide-box bg-none" id="service-caution">
              <p class="caution-text">정액료는 VAT 포함 가격입니다.</p>
            </div>
            <p class="popup-text" id="serveic-guide"></p>
            <div class="table-container" id="serveic_table">
              <div class="table-area">
                <table>
                  <caption></caption>
                  <colgroup>
                    <col />
                    <col />
                    <col />
                  </colgroup>
                  <thead>
                    <tr>
                      <th scope="col">부가서비스</th>
                      <th scope="col">가입일</th>
                      <th scope="col">정액료</th>
                    </tr>
                  </thead>
                  <tbody id="ser"></tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="popup-bottom">
            <div class="button-box">
              <button type="button" class="btn btn-primary" id="btnPrivacyAgree" onclick="togglePopup('popupService')"><span>닫기</span></button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 서비스 약정 팝업-->
    <div id="popupServiveAgree" class="popup">
      <div class="dim"></div>
      <div class="popup-container">
        <div class="popup-area">
          <div class="popup-top">
            <div class="popup-title large-title">서비스 약정</div>
          </div>
          <div class="popup-middle">
            <p class="popup-text align-left">
              서비스 이용 기간을 설정하시면, 인터넷 기본료 또는 장비 임대료 할인 혜택을 드립니다.<br />
              약정 기간별 요금할인 혜택을 받으세요!
            </p>
            <div class="caution-guide-box bg-none mt-36">
              <p class="caution-text dot">인터넷 서비스약정 할인(예시)</p>
            </div>
            <div class="table-container">
              <div class="table-area">
                <table>
                  <caption></caption>
                  <colgroup>
                    <col />
                    <col />
                    <col />
                    <col />
                  </colgroup>
                  <thead>
                    <tr>
                      <th scope="col">구분</th>
                      <th scope="col">1년 약정</th>
                      <th scope="col">2년 약정</th>
                      <th scope="col">3년 약정</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <th scope="row">B tv</th>
                      <td>-2,200원</td>
                      <td>-1,100원</td>
                      <td>-550원</td>
                    </tr>
                    <tr>
                      <th scope="row">B tv pop</th>
                      <td>-3,300원</td>
                      <td>-2,200원</td>
                      <td>-1,100원</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <p class="bottom-text">(VAT 포함)</p>
            </div>
            <div class="caution-guide-box bg-none mt-14">
              <p class="caution-text asterisk highlight">서비스 이용기간에 따라 요금할인 혜택이 가능합니다.</p>
            </div>
          </div>
          <div class="popup-bottom">
            <div class="button-box">
              <button type="button" class="btn btn-primary" onclick="togglePopup('popupServiveAgree')"><span>닫기</span></button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 결합 약정 팝업 -->
    <div id="popupCombination" class="popup">
      <div class="dim"></div>
      <div class="popup-container">
        <div class="popup-area">
          <div class="popup-top">
            <div class="popup-title large-title">결합 약정</div>
          </div>
          <div class="popup-middle">
            <p class="popup-text align-left">인터넷과 B tv(또는 집전화)를 결합 시, 추가 할인 혜택을 드립니다.</p>
            <div class="caution-guide-box bg-none mt-36">
              <p class="caution-text dot">요즘우리집 결합(예시) <br />(인터넷+TV+집전화 / 인터넷+TV)</p>
            </div>
            <div class="table-container">
              <div class="table-area">
                <table>
                  <caption></caption>
                  <colgroup>
                    <col />
                    <col />
                    <col />
                    <col />
                    <col />
                  </colgroup>
                  <thead>
                    <tr>
                      <th scope="col" colspan="2">요금제</th>
                      <th scope="col">3년 약정</th>
                      <th scope="col">2년 약정</th>
                      <th scope="col">1년 약정</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <th scope="row" rowspan="2">인터넷</th>
                      <td>기가 계열</td>
                      <td>-5,500원</td>
                      <td>-2,750원</td>
                      <td>-1,375원</td>
                    </tr>
                    <tr>
                      <td>광랜 계열</td>
                      <td>-1,100원</td>
                      <td>-550원</td>
                      <td>-275원</td>
                    </tr>
                    <tr>
                      <th scope="row">B tv</th>
                      <td>
                        B tv 이코노미<br />
                        이상
                      </td>
                      <td>-2,200원</td>
                      <td>-1,100원</td>
                      <td>-550원</td>
                    </tr>
                    <tr>
                      <th scope="row">B tv pop</th>
                      <td>
                        pop 180,<br />
                        pop230
                      </td>
                      <td>-3,300원</td>
                      <td>-2,200원</td>
                      <td>-1,100원</td>
                    </tr>
                    <tr>
                      <th scope="row">B tv cable</th>
                      <td>
                        cable 100,<br />
                        cable 200
                      </td>
                      <td>-1,100원</td>
                      <td>-550원</td>
                      <td>-275원</td>
                    </tr>
                    <tr>
                      <th scope="row">전화</th>
                      <td>
                        인터넷전화<br />
                        기본
                      </td>
                      <td>-1,100원</td>
                      <td>-550원</td>
                      <td>-275원</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <p class="bottom-text">(VAT 포함)</p>
            </div>
            <div class="caution-guide-box bg-none mt-14">
              <p class="caution-text asterisk highlight">요즘우리집 결합 등 다양한 결합 상품으로 추가 할인 혜택이 가능합니다.</p>
            </div>
          </div>
          <div class="popup-bottom">
            <div class="button-box">
              <button type="button" class="btn btn-primary" onclick="togglePopup('popupCombination')"><span>닫기</span></button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- prettier-ignore -->
    @@include("commonJs.html")
    <script type="text/javascript">
      $(document).ready(function () {
        'use strict';
        initUIComponents(true); // 초기화 function
        var vars_type = getUrlParameter('cur_vars_type'); //vars t-app callgate 분기 변수
        if (vars_type == '' || vars_type == undefined) vars_type = 'C';
        //**
        //callgate일 때 와 t-app일 때의 html화면 처리
        var attrList = [
          {
            elemName: 'typeTitle',
            varsType: 'C',
            attrType: 'style',
            value: 'display: block',
            else: 'display: none',
          },
          {
            elemName: 'footer',
            varsType: 'C',
            attrType: 'style',
            value: 'display: block',
            else: 'remove',
          },
        ];
        setAttribute(vars_type, attrList);

        var ui = common.ui;

        //좌/우측 swipe이벤트
        common.PubSub.on({
          'swipe.left': function (e, data) {
            console.log(data.direction, data.startX, data.distanceX);
          },
          'swipe.right': function (e, data) {
            console.log(data.direction, data.startX, data.distanceX);
            // 이전버튼 처리 (swipe 이벤트)
            btn_back();
          },
        });

        try {
          var user_name = getUrlParameter('user_name');
          /*@build-time*/ user_name = '홍길동';
          $('#name').html(user_name + ' 고객님');

          // 이용중인서비스 리스트
          var user_info = getUrlParameter('user_info');
          /*@build-time*/ user_info = 'TV(Btv(IPTV_sm art 3 STB))|인터넷(광랜E(500))';
          var user = user_info.split('|');
          var user_html = '';

          for (var i = 0; i < user.length; i++) {
            if (user[i] == '') {
              user_html += '';
            } else {
              user_html += '<li>';
              user_html += '<span>' + user[i] + '</span>';
              user_html += '</li>';
            }
          }
          $('.info-list-box').html(user_html);

          // 공통 변수
          var format = ['.'];

          // 서비스 선택
          var service_select = getUrlParameter('service_select');
          /*@build-time*/ service_select = '[인터넷] 표준형 광랜|[TV] Btv선택형|[인터넷] Giga라이트+WiFie|[인터넷] 표준형 광랜|[TV] Btv선택형|[인터넷] Giga라이트+WiFie';
          var service = service_select.split('|');
          var select_num = getUrlParameter('select_num');
          /*@build-time*/ select_num = '2';

          var b = 1;
          var service_html = '';
          // javascript:sendRepPageData($(this).text().trim(), 'M1', 'menu');
          service_html += "<div class='dropdown-area'>";
          service_html += "<a href='#' class='btn-open'>" + service[parseInt(select_num) - 1] + '</a>';
          service_html += "<ul class='dropdown-list'>";
          service_html += "<li class='list'>";
          service_html += "<a href='javascript:sendRepPageData($(this).text().trim(), 1, );' id='select_name'>";
          service_html += "<span class='text'>" + service[0] + '</span></a></li>';

          for (var i = 1; i < service.length; i++) {
            if (service[i] == '') {
              service_html += '';
            } else {
              var a = ++b;
              service_html += "<li class='list'>";
              service_html += '<a href="javascript:sendRepPageData($(this).text().trim(),' + a + " , 'menu');\" id='select_name'>";
              service_html += "<span class='text'>" + service[i] + '</span></a></li>';
            }
          }
          service_html += '</ul></div>';
          $('#service').html(service_html);

          // 상품가입정보 상세
          var payment_system = getUrlParameter('payment_system'); // 요금제
          var join = getUrlParameter('join'); // 가입일
          var service_status = getUrlParameter('service_status'); // 서비스상태
          var service_commitment = getUrlParameter('service_commitment'); // 서비스약정이름
          var set_agreement = getUrlParameter('set_agreement'); //결합약정이름
          var payment_method = getUrlParameter('payment_method'); // 결제방법
          var fare_guide = getUrlParameter('fare_guide'); // 요금안내서유형

          /*@build-time*/ payment_system = '[TV] Btv 선택형';
          /*@build-time*/ join = '20230920';
          /*@build-time*/ service_status = '사용중';
          /*@build-time*/ service_commitment = '2년 약정';
          /*@build-time*/ set_agreement = '3년 약정';
          /*@build-time*/ payment_method = '은행자동납부';
          /*@build-time*/ fare_guide = 'Bill Leter(App)';

          if (service_commitment == '무약정' || service_commitment == '정지중') {
            $('#d_payment_system').text(payment_system);
            $('#d_join').text(getDayFmt(join, format));
            $('#d_service_status').text(service_status);
            $('#d_service_commitment').text(service_commitment);
            $('#d_set_agreement').text(set_agreement);
            $('#d_payment_method').text(payment_method);
            $('#d_fare_guide').text(fare_guide);
            $('#check_serv1').css('display', 'none');
          } else {
            $('#d_payment_system').text(payment_system);
            $('#d_join').text(getDayFmt(join, format));
            $('#d_service_status').text(service_status);
            $('#d_service_commitment').text(service_commitment);
            $('#d_set_agreement').text(set_agreement);
            $('#d_payment_method').text(payment_method);
            $('#d_fare_guide').text(fare_guide);
          }

          // 서비스 약정
          if (service_status == '이용정지') {
            $('#check_serv1').css('display', 'none');
            $('#check_serv2').css('display', 'none');
            $('#check_serv1_stop').css('display', 'block');
            $('#check_serv2_stop').css('display', 'block');
          }

          // 결합 약정
          if (set_agreement == '무약정' || set_agreement == '정지중') {
            $('#check_serv2').css('display', 'none');
          }

          // 서비스약정
          var service_start_date = getUrlParameter('service_start_date');
          var service_end_date = getUrlParameter('service_end_date');
          var service_d_day = getUrlParameter('service_d_day');
          /*@build-time*/ service_start_date = '20220920';
          /*@build-time*/ service_end_date = '20240920';
          $('#service_date').text(getDayFmt(service_start_date, format) + ' ~ ' + getDayFmt(service_end_date, format));

          // 결합약정
          var start_date = getUrlParameter('start_date');
          var end_date = getUrlParameter('end_date');
          var d_day = getUrlParameter('d_day');
          /*@build-time*/ start_date = '20220920';
          /*@build-time*/ end_date = '20250920';
          $('#set_agree_date').text(getDayFmt(start_date, format) + ' ~ ' + getDayFmt(end_date, format));

          // 기기정보 팝업세팅
          var equipment_information = getUrlParameter('equipment_information'); // 기기정보
          /*@build-time*/ equipment_information = '11ax Giga AP|임대|20230805|^11ax Giga AP|임대|20230805|';
          var equipment_information_arr = equipment_information.split('^');

          var equipment_html = '';

          if (equipment_information_arr == '') {
            $('#eq_table').css('display', 'none');
            $('#eq-guide').html('장비 정보가 없습니다.');
            $('#eq-guide').css('display', 'block');
          } else {
            for (var i = 0; i < equipment_information_arr.length; i++) {
              var equipment_information_data = equipment_information_arr[i].split('|');
              if (equipment_information_data[0] == '') {
                equipment_html += '';
              } else {
                equipment_html += '<tr>';
                equipment_html += '<td>' + equipment_information_data[0] + '</td>';
                equipment_html += '<td>' + equipment_information_data[1] + '</td>';
                equipment_html += '<td>' + equipment_information_data[2] + '</td>';
                equipment_html += '<td>' + getDayFmt(equipment_information_data[3], format) + '</td>';
                equipment_html += '</tr>';
              }
            }
          }

          $('#inf').html(equipment_html);

          // 상용중인 부가서비스
          var use_service = getUrlParameter('use_service');
          /*@build-time*/ use_service = 'T_원스톱(통합)|20230805|1650^T_11ax Giga? WiFi<br>(통합)|20230805|0';
          var use_service_arr = use_service.split('^');
          var use_service_html = '';

          if (use_service_arr == '') {
            $('#serveic_table').css('display', 'none');
            $('#service-caution').css('display', 'none');
            $('#serveic-guide').html('부가서비스 정보가 없습니다.');
            $('#serveic-guide').css('display', 'block');
          } else {
            for (var i = 0; i < use_service_arr.length; i++) {
              var use_service_data = use_service_arr[i].split('|');
              if (use_service_data[0] == '') {
                use_service_html += '';
              } else {
                use_service_html += '<tr>';
                use_service_html += '<td>' + use_service_data[0] + '</td>';
                use_service_html += '<td>' + getDayFmt(use_service_data[1], format) + '</td>';
                use_service_html += '<td>' + use_service_data[2].toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',') + '원</td>';
                use_service_html += '</tr>';
              }
            }
          }
          $('#ser').html(use_service_html);
        } catch (e) {}

        // 이벤트 리스터 등록 맨마지막에
        //커스텀 셀렉트 ../js/scipt.js
        $('.dropdown-area').customSelectTxt();
      });

      //-------------------------------------------------------------------------------------------------------------------
      // 화면저장 CALLBACK 함수 - callbackTPhone
      //-------------------------------------------------------------------------------------------------------------------
      // ret - boolean(성공/ 실패)
      //-------------------------------------------------------------------------------------------------------------------
      function callbackTPhone(ret) {
        common.closeCapture();

        // 화면저장버튼 활성화
        $('#btn_screen_save').prop('disabled', false);
      }

      $.fn.customSelectTxt = function () {
        var csBody = [];
        var csOpenBtn = [];
        var csBtn = [];
        var csBodys = this;
        return this.each(function (i) {
          csBody[i] = $(this);
          csOpenBtn[i] = csBody[i].find('.btn-open');
          csBtn[i] = csBody[i].find('.list');
          csOpenBtn[i].on('click', function (e) {
            e.preventDefault();
            csBody[i].toggleClass('active');
          });
          csBtn[i].on('click', function (e) {
            var html = $(this).find('.text').html();
            csBtn[i].removeClass('selected');
            $(this).addClass('selected');
            csOpenBtn[i].html(html);
            csBody[i].removeClass('active');
          });
        });
      };
    </script>
  </body>
</html>
