<!DOCTYPE html>
<html lang="ko">
  <!-- prettier-ignore -->
  @@include("head.html")
  <body>
    <!-- hidden input -->
    <input type="hidden" id="menu" iweb-data="in" />
    <input type="hidden" id="back_btn_type" value="#" />
    <!-- 보이는 ARS / callgate iweb-data 값 세팅 정리 (2019.07.09) start -->
    <input type="hidden" id="vars_type" iweb-data="in" />
    <input type="hidden" id="run_time" iweb-data="out" />
    <input type="hidden" id="cur_vars_type" iweb-data="out" />
    <input type="hidden" id="phone_detail_pay_content" iweb-data="out" />
    <input type="hidden" id="total_amount" iweb-data="out" />
    <input type="hidden" id="phone_select_content" iweb-data="out" />

    <!-- 보이는 ARS / callgate  값 세팅 정리 (2019.07.09) end -->

    <div class="wrapper phone-pay-detail">
      <!-- 콜게이트 상단  -->
      <!-- prettier-ignore -->
      @@include("timeNoticeSub.html")
      <main class="main">
        <!-- prettier-ignore -->
        @@include("header.html", {
          "headerType" : "default",
          "title": '휴대폰결제 상세내역',
          "isBtn" : true
        })
        <div class="content-container">
          <section class="content-area">
            <div class="phone-pay-detail-container">
              <div class="total-price-box">
                <div class="total-price-label">총 이용금액</div>
                <div class="total-price-data"><strong class="num" id="all_num"></strong>원</div>
              </div>
              <div class="phone-pay-detail-list-box">
                <ul id="detail-list">
                  <!-- // 배포시 주석처리 start -->
                  <li class="phone-pay-detail-item">
                    <a href="#" class="phone-pay-detail-anc">
                      <div class="label">쿠팡</div>
                      <div class="value">
                        <span class="date">04.22. 17:46</span>
                        <span class="price"><strong class="num">3,260</strong>원</span>
                      </div>
                    </a>
                    <div class="phone-pay-detail-sub">
                      <ul>
                        <li class="sub-list">
                          <div class="label"><span class="txt">이용서비스</span></div>
                          <div class="value">쿠팡</div>
                        </li>
                        <li class="sub-list">
                          <div class="label"><span class="txt">서비스URL</span></div>
                          <div class="value"><span class="txt eng">www.coupang.com</span></div>
                        </li>
                        <li class="sub-list">
                          <div class="label"><span class="txt sm">결제금액</span></div>
                          <div class="value">
                            <span class="txt price"><strong class="num">3,260</strong>원</span>
                          </div>
                        </li>
                        <li class="sub-list">
                          <div class="label"><span class="txt">이용내역 문의처</span></div>
                          <div class="value"><span class="txt call">1566-0123</span></div>
                        </li>
                        <li class="sub-list">
                          <div class="label"><span class="txt sm">서비스업체</span></div>
                          <div class="value"><span class="txt">쿠팡(주)</span></div>
                        </li>
                        <li class="sub-list">
                          <div class="label"><span class="txt">결제구분</span></div>
                          <div class="value"><span class="txt">간편결제</span></div>
                        </li>
                        <li class="sub-list">
                          <div class="label"><span class="txt">내역구분</span></div>
                          <div class="value"><span class="txt">소액결제</span></div>
                        </li>
                        <li class="sub-list">
                          <div class="label"><span class="txt">결제대행사</span></div>
                          <div class="value"><span class="txt">갤럭시아</span></div>
                        </li>
                        <li class="sub-list">
                          <div class="label"><span class="txt">소액결제 문의처</span></div>
                          <div class="value"><span class="txt call">1566-0123</span></div>
                        </li>
                      </ul>
                    </div>
                  </li>
                  <li class="phone-pay-detail-item">
                    <a href="#" class="phone-pay-detail-anc">
                      <div class="label">쿠팡</div>
                      <div class="value">
                        <span class="date">04.22. 17:46</span>
                        <span class="price"><strong class="num">3,260</strong>원</span>
                      </div>
                    </a>
                    <div class="phone-pay-detail-sub">
                      <ul>
                        <li class="sub-list">
                          <div class="label"><span class="txt">이용서비스</span></div>
                          <div class="value">쿠팡</div>
                        </li>
                        <li class="sub-list">
                          <div class="label"><span class="txt">서비스URL</span></div>
                          <div class="value"><span class="txt eng">쿠팡</span></div>
                        </li>
                        <li class="sub-list">
                          <div class="label"><span class="txt sm">결제금액</span></div>
                          <div class="value">
                            <span class="txt price"><strong class="num">3,260</strong>원</span>
                          </div>
                        </li>
                        <li class="sub-list">
                          <div class="label"><span class="txt">이용내역 문의처</span></div>
                          <div class="value"><span class="txt call">1566-0123</span></div>
                        </li>
                        <li class="sub-list">
                          <div class="label"><span class="txt sm">서비스업체</span></div>
                          <div class="value"><span class="txt">쿠팡(주)</span></div>
                        </li>
                        <li class="sub-list">
                          <div class="label"><span class="txt">결제구분</span></div>
                          <div class="value"><span class="txt">간편결제</span></div>
                        </li>
                        <li class="sub-list">
                          <div class="label"><span class="txt">내역구분</span></div>
                          <div class="value"><span class="txt">소액결제</span></div>
                        </li>
                        <li class="sub-list">
                          <div class="label"><span class="txt">결제대행사</span></div>
                          <div class="value"><span class="txt">갤럭시아</span></div>
                        </li>
                        <li class="sub-list">
                          <div class="label"><span class="txt">소액결제 문의처</span></div>
                          <div class="value"><span class="txt call">1566-0123</span></div>
                        </li>
                      </ul>
                    </div>
                  </li>
                  <!-- // 배포시 주석처리 end -->
                </ul>
              </div>
            </div>
          </section>
        </div>

        <!-- 콜게이트 종료버튼 -->
        <!-- prettier-ignore -->
        @@include("footerBtnEnd.html")
        <!-- //콜게이트 종료버튼 -->
      </main>
    </div>
    <script type="text/javascript" src="/{version}/js/index_jquery/script.js"></script>
    <!-- prettier-ignore -->
    @@include("commonJs.html")

    <script type="text/javascript">
      // document.addEventListener('DOMContentLoaded', goScroll);
      $(document).ready(function () {
        'use strict';

        var vars_type = getUrlParameter('cur_vars_type'); //vars t-app callgate 분기 변수
        if (vars_type == '' || vars_type == undefined) vars_type = 'C';

        //setCss('/{version}/', vars_type);

        //**
        //callgate일 때 와 t-app일 때의 html화면 처리
        var attrList = [
          {
            elemName: 'typeTitle',
            varsType: 'C',
            attrType: 'style',
            value: 'display: block',
            else: 'remove', //attribute가 아닌 아예 제거
          },
          {
            elemName: 'footer',
            varsType: 'C',
            attrType: 'style',
            value: 'display: block',
            else: 'remove',
          },
        ];
        setAttribute(vars_type, attrList);

        initUIComponents(true); // 초기화 function

        var ui = common.ui;

        //좌/우측 swipe이벤트
        common.PubSub.on({
          'swipe.left': function (e, data) {
            console.log(data.direction, data.startX, data.distanceX);
          },
          'swipe.right': function (e, data) {
            console.log(data.direction, data.startX, data.distanceX);
            // 이전버튼 처리 (swipe 이벤트)
            btn_back();
          },
        });

        var total_amount = getUrlParameter('total_amount');
        /*@build-time*/ total_amount = 10000;
        if (total_amount == '') {
          $('#all_num').text('0');
        } else {
          $('#all_num').text(total_amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ','));
        }

        var select_content = getUrlParameter('phone_select_content');
        var matches = document.getElementsByClassName('phone-pay-detail-item');
        var slide = document.getElementsByClassName('phone-pay-detail-sub');

        matches.item(parseInt(select_content)).classList.add('on');
        slide.item(parseInt(select_content)).style.display = 'block';
      });

      // 리턴 타입
      // 결제구분|결제시간|결제금액^결제구분|결제시간|결제금액

      var phone_pay = getUrlParameter('phone_detail_pay_content');
      /*@build-time*/ phone_detail_pay_content = '결제구분|결제시간|결제금액^결제구분|결제시간|결제금액^결제구분|결제시간|결제금액^결제구분|결제시간|결제금액';
      var phone_pay_arr = phone_pay.split('^');
      console.log(phone_detail_pay_content.split('^'));
      var phone_pay_html = '';
      $('#pay_count').text(phone_pay_arr.length - 1);
      var len = phone_pay_arr.length - 1;
      // /*@build-time*/ len = '2';
      for (var i = 0; i < len; i++) {
        var phone_pay_list = phone_pay_arr[i].split('|');
        var phone_pay_count = phone_pay_list.length;
        var sc = common.uri.parseUrl(phone_pay_list[4]);
        if (1 <= len) {
          phone_pay_html += '<li class="phone-pay-detail-item">';
          phone_pay_html += '<a href="#" class="phone-pay-detail-anc">';
          phone_pay_html += '<div class="label">' + phone_pay_list[0] + '</div>';
          phone_pay_html += '<div class="value">';
          phone_pay_html += '<span class="date">' + phone_pay_list[1] + '</span>';
          phone_pay_html += '<span class="price"><strong class="num">' + phone_pay_list[2].toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',') + '</strong>원</span>';
          phone_pay_html += '</div></a>';
          phone_pay_html += '<div class="phone-pay-detail-sub">';
          phone_pay_html += '<ul>';
          phone_pay_html += '<li class="sub-list">';
          phone_pay_html += '<div class="label"><span class="txt">이용서비스</span></div>';
          phone_pay_html += '<div class="value"><span class="txt">' + phone_pay_list[3] + '</span></div>';
          phone_pay_html += '</li>';
          phone_pay_html += '<li class="sub-list">';
          phone_pay_html += '<div class="label"><span class="txt">서비스URL</span></div>';
          phone_pay_html += '<div class="value"><span class="txt eng">' + phone_pay_list[4] + '</span></div>';
          /* phone_pay_html += "<a href=\"javascript:callURL('" + sc.host + "', 'url', '" + sc.scheme + "');\"><div class='value'>"+phone_pay_list[4]+"</div></a>"; */
          phone_pay_html += '</li>';
          phone_pay_html += '<li class="sub-list">';
          phone_pay_html += '<div class="label"><span class="txt">결제금액</span></div>';
          phone_pay_html += '<div class="value"><span class="txt price"><strong class="num">' + phone_pay_list[5].toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',') + '</strong>원</span></div>';
          phone_pay_html += '</li>';
          phone_pay_html += '<li class="sub-list">';
          phone_pay_html += '<div class="label"><span class="txt">이용내역 문의처</span></div>';
          phone_pay_html += '<div class="value"><span class="txt call">' + phone_pay_list[6] + '</span></div>';
          phone_pay_html += '</li>';
          phone_pay_html += '<li class="sub-list">';
          phone_pay_html += '<div class="label"><span class="txt">서비스업체</span></div>';
          phone_pay_html += '<div class="value"><span class="txt">' + phone_pay_list[7] + '</span></div>';
          phone_pay_html += '</li>';
          phone_pay_html += '<li class="sub-list">';
          phone_pay_html += '<div class="label"><span class="txt">결제구분</span></div>';
          phone_pay_html += '<div class="value"><span class="txt">' + phone_pay_list[8] + '</span></div>';
          phone_pay_html += '</li>';
          phone_pay_html += '<li class="sub-list">';
          phone_pay_html += '<div class="label"><span class="txt">내역구분</span></div>';
          phone_pay_html += '<div class="value"><span class="txt">' + phone_pay_list[9] + '</span></div>';
          phone_pay_html += '</li>';
          phone_pay_html += '<li class="sub-list">';
          phone_pay_html += '<div class="label"><span class="txt">결제대행사</span></div>';
          phone_pay_html += '<div class="value"><span class="txt">' + phone_pay_list[10] + '</span></div>';
          phone_pay_html += '</li>';
          phone_pay_html += '</ul></div></li>';
        } else {
        }
        $('#detail-list').html(phone_pay_html);
        /* document.getElementById('payment_list').innerHTML = phone_pay_html; */
      }

      // 리스트 아코디언
      $('.phone-pay-detail-anc').on('click', function (e) {
        e.preventDefault();
        if (!$(this).parent().hasClass('on')) {
          $('.phone-pay-detail-item').removeClass('on');
          $(this).parent().addClass('on');
          $('.phone-pay-detail-item .phone-pay-detail-sub').slideUp(150);
          $(this).next().slideDown(150);
        } else {
          $('.phone-pay-detail-item').removeClass('on');
          $('.phone-pay-detail-item .phone-pay-detail-sub').slideUp(150);
        }
      });

      function goScroll() {
        // input 창안에 focus가 들어올때  event
        var menuHeight = document.getElementsByTagName('section').item(0).clientHeight;
        var scrollHeight = document.body.scrollHeight;
        var availHeight = screen.availHeight;
        var select_content = getUrlParameter('phone_select_content');

        if (select_content == 0) {
        } else {
          var offset = $('.on').offset();
          //var location = document.querySelector(".on").offsetTop;
          $('section').animate({ scrollTop: offset.top - 40 }, 400);
        }
      }

      var curURL = '';
      var curMenu = '';
      var gubun = '';
      function callURL(url, menu, flag) {
        curURL = url;
        curMenu = menu;
        var vars_type = getUrlParameter('cur_vars_type');
        gubun = flag;

        var callUrl = gubun + '://' + curURL;
        alert('intent://' + curURL + '#Intent;scheme=' + gubun + ';end');
        alert(callUrl);
        if (vars_type == 'T') {
          document.location = 'intent://' + curURL + '#Intent;scheme=' + gubun + ';end'; //"intent://m.troaming.co.kr/mtr/index#Intent;scheme=https;end";
        } else {
          window.CallgateSDK.executeBrowser(callUrl, 'false');
        }

        sendRepPageData('', curMenu, 'menu');
      }
    </script>
  </body>
</html>
